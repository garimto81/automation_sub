# PRD-0002: Workflow Automation System - Checklist

**PRD**: [0002-prd-workflow-automation.md](../../tasks/prds/0002-prd-workflow-automation.md)
**Version**: 1.0
**Created**: 2026-01-05
**Last Updated**: 2026-01-05

---

## Overall Progress

| Phase | Status | Progress |
|-------|--------|----------|
| Phase 0: Infrastructure | Not Started | 0% |
| Phase 1: Data Synchronization | Not Started | 0% |
| Phase 2: File Transfer | Not Started | 0% |
| Phase 3: Monitoring | Not Started | 0% |
| Phase 4: Graphics Automation | Not Started | 0% |
| Phase 5: AI Agent | Not Started | 0% |

**Total Progress**: 0%

---

## Phase 0: Infrastructure (1주)

### Event Bus
- [ ] Redis 기반 Event Bus 구현
- [ ] 이벤트 발행/구독 로직
- [ ] 이벤트 로깅 및 추적

### Base Agent
- [ ] `BaseAgent` 추상 클래스 정의
- [ ] `AgentConfig` 데이터 클래스
- [ ] `AgentStatus` enum 정의
- [ ] 초기화/처리/헬스체크 인터페이스

### Configuration
- [ ] YAML 기반 설정 파일 구조
- [ ] 환경별 설정 분리 (dev/staging/prod)
- [ ] 에이전트별 설정 관리

### Logging & Monitoring
- [ ] 구조화된 로깅 (JSON format)
- [ ] Prometheus 메트릭 수집
- [ ] 에이전트 상태 대시보드

---

## Phase 1: Data Synchronization (2주)

### RFID Parser Agent
- [ ] RFID 데이터 수신 인터페이스
- [ ] 데이터 파싱 로직
- [ ] PostgreSQL 저장
- [ ] 이벤트 발생 (`data_sync.rfid.received`)

### Sheets Sync Agent
- [ ] Google Sheets API 연동
- [ ] DB → Sheets 동기화
- [ ] Sheets → DB 역동기화
- [ ] 실시간 변경 감지

### Conflict Resolution
- [ ] 충돌 감지 로직
- [ ] 충돌 해결 전략 (Last Write Wins / Merge)
- [ ] 충돌 알림 발송

---

## Phase 2: File Transfer (2주)

### Upload Agent
- [ ] 폴더 감시 (watchdog)
- [ ] 변경 파일 감지
- [ ] 청크 분할 업로드
- [ ] Cloud Storage 연동 (GCS/S3/R2)

### Download Agent
- [ ] Cloud Storage 변경 감지
- [ ] 파일 다운로드
- [ ] 로컬 저장소 관리

### Integrity Verification
- [ ] MD5/SHA256 체크섬 생성
- [ ] 전송 후 검증
- [ ] 실패 시 자동 재전송 (최대 3회)

---

## Phase 3: Monitoring (2주)

### Health Check Agent
- [ ] RFID 연결 상태 확인
- [ ] DB 연결 상태 확인
- [ ] Sheets API 상태 확인
- [ ] 주기적 헬스체크 스케줄러

### Alert Agent
- [ ] Slack API 연동
- [ ] 알림 규칙 정의
- [ ] 심각도별 채널 라우팅
- [ ] 알림 쿨다운 (중복 방지)

### Dashboard Agent
- [ ] PA 모니터링 대시보드 UI
- [ ] 실시간 상태 표시
- [ ] 에러 로그 표시
- [ ] 알림 히스토리

---

## Phase 4: Graphics Automation (2주)

### Trigger Agent
- [ ] 이벤트-그래픽 매핑 정의
- [ ] 이벤트 리스너 구현
- [ ] 그래픽 호출 우선순위 로직
- [ ] PRD-0001 GraphicsAPI 연동

### automation_ae 통합
- [ ] Nexrender 연동
- [ ] 렌더링 워커 (Celery)
- [ ] NAS 출력 관리자 재사용
- [ ] 배치 작업 CSV 파서 재사용

### Web Graphics Renderer
- [ ] Playwright HTML→PNG 캡처
- [ ] 렌더링 큐 관리
- [ ] 캐싱 전략

---

## Phase 5: AI Agent (3주)

### OpenAI Integration
- [ ] OpenAI API 클라이언트
- [ ] GPT-4o / GPT-4o-mini 설정
- [ ] 토큰 사용량 추적
- [ ] 비용 모니터링

### Story Detection Agent
- [ ] 플레이어 히스토리 분석
- [ ] 스토리라인 추출
- [ ] 하이라이트 제안
- [ ] PD 승인 요청 워크플로우

### Priority Decision Agent
- [ ] 그래픽 우선순위 판단
- [ ] Day별 콘텐츠 비율 조절
- [ ] 컨텍스트 기반 결정

### Anomaly Resolution Agent
- [ ] 데이터 이상 감지
- [ ] 자동 수정 규칙
- [ ] 수정 범위 제한
- [ ] 수정 로그 기록

### Human-in-the-Loop
- [ ] PD 오버라이드 UI
- [ ] Slack 승인 요청
- [ ] 승인/거부 기록
- [ ] 피드백 수집

---

## Validation Checklist

### Data Sync
- [ ] 동기화 지연 < 2초 확인
- [ ] 충돌 해결 테스트
- [ ] 대량 데이터 처리 테스트

### File Transfer
- [ ] 전송 성공률 > 99% 확인
- [ ] 체크섬 검증 테스트
- [ ] 대용량 파일 테스트 (100MB+)

### Monitoring
- [ ] 알림 응답 시간 < 30초 확인
- [ ] 알림 채널 테스트
- [ ] 대시보드 동작 확인

### Graphics Automation
- [ ] 이벤트-그래픽 트리거 테스트
- [ ] automation_ae 통합 테스트
- [ ] Web Graphics 렌더링 테스트

### AI Agent
- [ ] AI 제안 정확도 테스트
- [ ] Human-in-the-Loop 워크플로우 테스트
- [ ] 비용 예산 내 운영 확인

---

## Integration Tests

### PRD-0001 Integration
- [ ] GraphicsAPI 연동 테스트
- [ ] WebSocket 통신 테스트
- [ ] PostgreSQL 공유 스키마 테스트

### automation_ae Integration
- [ ] Nexrender 렌더링 테스트
- [ ] NAS 출력 테스트

---

## Notes

- Phase 0은 모든 다른 Phase의 기반
- RFID 시스템 연동은 현장 장비 의존
- AI 비용 예산 사전 확인 필요

---

## Related PRs

| PR | Title | Status | Items |
|----|-------|--------|-------|
| - | - | - | - |

---

## References

| Document | Path |
|----------|------|
| PRD-0002 | `tasks/prds/0002-prd-workflow-automation.md` |
| Workflow Architecture | `docs/images/workflow-architecture.png` |
| 5 Automation Domains | `docs/images/automation-domains.png` |
| AI Agent Hierarchy | `docs/images/ai-agent-hierarchy.png` |
